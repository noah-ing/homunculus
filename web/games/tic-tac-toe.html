<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tic-Tac-Toe | HOMUNCULUS Arcade</title>
    <script src="../stats.js"></script>
    <style>
        body { margin:0; background:linear-gradient(45deg,#1a1a2e,#16213e); color:white; font-family:monospace; text-align:center; padding:20px; }
        h1 { color:#00ff88; text-shadow:0 0 10px #00ff88; }
        .board { display:grid; grid-template-columns:repeat(3,100px); gap:5px; margin:20px auto; width:fit-content; }
        .cell { width:100px; height:100px; background:#333; border:2px solid #555; font-size:36px; color:#00ff88; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .cell:hover { background:#444; border-color:#00ff88; }
        .cell.x { color:#ff6b6b; }
        .cell.o { color:#4ecdc4; }
        button { background:#00ff88; color:#000; border:none; padding:15px 30px; margin:10px; border-radius:25px; cursor:pointer; font-family:monospace; }
        button:hover { background:#44ff99; }
        .info { margin:15px 0; font-size:18px; }
        .winner { color:#00ff88; font-size:24px; animation:pulse 1s infinite; }
        @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.5; } }
    </style>
</head>
<body>
    <h1>üéØ TIC-TAC-TOE</h1>
    <div class="info">Current Player: <span id="current">X</span></div>
    <div class="board" id="board"></div>
    <div id="message"></div>
    <button onclick="resetGame()">üîÑ New Game</button>
    <button onclick="location.href='../index.html'">üè† Home</button>

    <script>
        let board = ['','','','','','','','',''];
        let currentPlayer = 'X';
        let gameActive = true;
        
        const winConditions = [
            [0,1,2],[3,4,5],[6,7,8],
            [0,3,6],[1,4,7],[2,5,8],
            [0,4,8],[2,4,6]
        ];
        
        // Track with stats system
        if (typeof personalStats !== 'undefined') {
            personalStats.trackGamePlay();
        }
        
        function createBoard() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.onclick = () => makeMove(i);
                boardEl.appendChild(cell);
            }
        }
        
        function makeMove(index) {
            if (board[index] === '' && gameActive) {
                board[index] = currentPlayer;
                const cell = document.querySelector(`[data-index="${index}"]`);
                cell.textContent = currentPlayer;
                cell.classList.add(currentPlayer.toLowerCase());
                
                if (checkWin()) {
                    document.getElementById('message').innerHTML = `<div class="winner">üèÜ ${currentPlayer} WINS! üèÜ</div>`;
                    gameActive = false;
                } else if (board.every(c => c !== '')) {
                    document.getElementById('message').innerHTML = '<div class="winner">ü§ù TIE GAME! ü§ù</div>';
                    gameActive = false;
                } else {
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    document.getElementById('current').textContent = currentPlayer;
                }
            }
        }
        
        function checkWin() {
            return winConditions.some(condition => 
                condition.every(index => board[index] === currentPlayer)
            );
        }
        
        function resetGame() {
            board = ['','','','','','','','',''];
            currentPlayer = 'X';
            gameActive = true;
            document.getElementById('current').textContent = 'X';
            document.getElementById('message').innerHTML = '';
            createBoard();
        }
        
        // Initialize game
        createBoard();
    </script>
</body>
</html>
